<!--
--- UCSF Chimera Copyright ---
Copyright (c) 2005-2009 Regents of the University of California.
All rights reserved.  This software provided pursuant to a
license agreement containing restrictions on its disclosure,
duplication and use.  This notice must be embedded in or
attached to all copies, including partial copies, of the
software or any revisions or derivations thereof.
--- UCSF Chimera Copyright ---
-->

<html>
<head>
<TITLE>Chimera Sessions</TITLE>
</head>
<body>
<h2>Chimera Sessions</h2>
<p>
<a name="sesdef">
A Chimera <b><i>session</i></b> (the state of Chimera during use)
</a>
can be <a href="#savesess">saved</a> and <a href="#restartsess">restored</a>.
A session file consists of Python code that reconstitutes
<a href="#whatsaved">most aspects</a> of Chimera
by displaying data and performing other operations.
</p><p>
Molecular coordinate and sequence alignment data are included in the
session file; however, <a href="filetypes.html#volume">volume data</a>
files must still be present to restart a session in which they were open.
When a session with volume data is restarted,
the user may be queried about file location(s)
if the data or the session file have been moved since the session was saved.
</p><p>
<a name="savesess">
Ways to save a session:</a>
<ul>
<li>with <a href="menu.html#menufile"><b>File... Save Session</b></a>
<li>with <a href="menu.html#menufile"><b>File... Save Session As...</b></a>
<li>with the command <A href="midas/save.html"><b>save</b></a>
</ul>
<a name="restartsess">
Ways to restart a session:</a>
<ul>
<li>with <a href="menu.html#menufile"><b>File... Restore Session</b></a>
<li>with <a href="opensave.html#opendialog"><b>File... Open</b></a>
(<a href="filetypes.html#command">file type</a> Python)
<li>with the command <A href="midas/open.html"><b>open</b></a>
(<a href="filetypes.html#command">file type</a> Python)
</ul>
A session may not restore correctly, or at all, in a version of Chimera 
older than that used to create the session.
If a session includes a structure that has duplicate atom names within
the same residue, it will not restore correctly.
</p><p>
Restoring a session creates a <b><i>compiled version of the file</i></b>
(binary) with the same name except <b>*.pyc</b> instead of <b>*.py</b>.  
The binary speeds up session restoration and will be used (if present)
even when the *.py file has been specified.  Further, opening the
*.pyc file directly will start the session even if the *.py file 
has been deleted.  However, keeping the *.py file is recommended:
<ul>
<li> the *.py file will work with subsequent versions of python,
whereas the *.pyc file will only work with the same version of python
that generated it
<li> the *.py file can be viewed and edited with a text editor, whereas
the binary *.pyc file cannot
<li> while *.py files are transferable among different types of computers, 
*.pyc files generated on one system may not be read correctly on another
</ul>
</p>

<a name="merging">
<h3>Merging Sessions</h3></a>
<p>
If models are already open when a session is being restored, 
the user will be asked whether the pre-existing models should be closed.
If not, the sessions will be merged; data from the incoming session
will be opened, but its environmental settings such as background color and
<a href="sideview.html#effects">effects</a> will not be applied.
</p><p>
When sessions are merged, 
models in the incoming session will be assigned new ID numbers
and transformed so that the model with the lowest ID in the incoming session
will have the same transform as the pre-existing lowest-ID model.
If these transformations are not as desired, they can be adjusted:
<ul>
<li>previously saved positions or default, untransformed positions
can be restored with <a href="midas/reset.html"><b>reset</b></a>;
a position named <b>session-start</b> is automatically saved and
included in the session file when a session is saved
<li><a href="midas/matrixcopy.html"><b>matrixcopy</b></a>
can be used to apply the transformation of one model to another
</ul>
Regardless of whether pre-existing models are closed when a
session is restored, any pre-existing
<a href="../ContributedSoftware/2dlabels/2dlabels.html">2D labels</a> 
and
<a href="../ContributedSoftware/2dlabels/2dlabels.html#colorkey">color key</a> 
will be removed, while pre-existing
<a href="../ContributedSoftware/multalignviewer/framemav.html" 
target="_top">sequence alignments</a> will be retained.
</p>

<a name="whatsaved">
<h3>What Sessions Include</h3></a>
<p>
The following are saved in session files:
<ul>
<li>display status, colors, and <a href="representation.html">styles</a>
of atoms, bonds, <a href="pbpanel.html#pbdef">pseudobonds</a>,
<a href="representation.html#ribbon">ribbons</a>, and
<a href="representation.html#surfaces">molecular surfaces</a>
<li>atomic coordinates, including alternate locations and changes such as from
<a href="../ContributedSoftware/structuremeas/structuremeas.html#adjust">bond rotation</a>
<li>PDB headers and residue secondary structure assignments
<li>atomic B-factor (isotropic and anisotropic),
occupancy, <a href="midas/vdwrad.html">radius</a>,
and <a href="../ContributedSoftware/addcharge/addcharge.html">charge</a> 
values
<li><a href="../ContributedSoftware/defineattrib/defineattrib.html#attribdef">attributes</a>
created with
<a href="../ContributedSoftware/defineattrib/defineattrib.html"><b>Define
Attribute</b></a>
<li><a href="../ContributedSoftware/nucleotides/nucleotides.html"><b>Nucleotides</b></a>
and <a href="../ContributedSoftware/thermal/thermal.html"><b>Thermal
Ellipsoids</b></a> representations
<li><a href="../ContributedSoftware/structuremeas/structuremeas.html"><b>Structure Measurements</b></a> 
including axis and plane representations
<li>other model types: <a href="surfattrib.html">(nonmolecular) surface</a>, 
<a href="vrmlattrib.html">volume and VRML</a>
(except a VRML model opened from a file that is then moved
before the session is saved)
<li>sequence data in
<a href="../ContributedSoftware/multalignviewer/framemav.html"
target="_top"><b>Multalign Viewer</b></a>,
including regions, associations, and trees
<li>standard labels, status of
<a href="../ContributedSoftware/2dlabels/2dlabels.html"><b>2D Labels</b></a>,
<a href="../ContributedSoftware/2dlabels/2dlabels.html#colorkey"><b>Color
Key</b></a>, and
<a href="../ContributedSoftware/scalebar/scalebar.html"><b>Scale Bar</b></a>
<li>window size, model translation/rotation, and global scale
<li><a href="clipping.html">clipping plane</a>
status, locations, and orientations
<li>saved positions (see
<a href="midas/savepos.html"><b>savepos</b></a>;
positions saved explicitly plus the position at the time of the save,
named <b>session-start</b>)
<li>color definitions (see
<a href="midas/colordef.html"><b>colordef</b></a>)
and aliases (see <a href="midas/alias.html"><b>alias</b></a>)
<li><a href="selection.html">selections</a>, current and saved 
(except of <a href="surfattrib.html#surfmodels">surface models</a>)
<li>viewing parameters:
 <a href="sideview.html#effects">depth cueing</a>,
 <a href="sideview.html#effects">subdivision quality</a>,
 <a href="sideview.html#effects">silhouettes</a>,
 <a href="sideview.html#camera">projection mode</a>,
 <a href="sideview.html#rotation">center of rotation method</a>, 
 <a href="sideview.html#lighting">lighting</a>,
 <a href="sideview.html#shininess">shininess/brightness</a>
<li><a href="stereo.html">camera mode</a> and
<a href="sideview.html#stereoparm">stereo parameters</a>
(however, the camera mode will not be restored if it is
<a href="stereo.html#sequential">sequential stereo</a>, 
or if Chimera was already in
<a href="stereo.html#sequential">sequential stereo</a>
prior to session restoration)
<li>information from
<a href="../ContributedSoftware/surfcapper/surfcapper.html"><b>Surface
Capping</b></a>,
<a href="../ContributedSoftware/surfcolor/surfcolor.html"><b>Surface
Color</b></a>,
<a href="../ContributedSoftware/surfzone/surfzone.html"><b>Surface
Zone</b></a>,
<a href="../ContributedSoftware/colorzone/colorzone.html"><b>Color Zone</b></a>,
and
<a href="../ContributedSoftware/icosahedron/icosahedron.html"><b>Icosahedron 
Surface</b></a>
<li>the status of
<a href="../ContributedSoftware/rotamers/rotamers.html"><b>Rotamers</b></a>,
<a href="../ContributedSoftware/volumeviewer/framevolumeviewer.html" 
target="_top"><b>Volume Viewer</b></a>,
<a href="../ContributedSoftware/volumepathtracer/framevolpath.html" 
target="_top"><b>Volume Tracer</b></a>,
<a href="../ContributedSoftware/multiscale/framemulti.html"
target="_top"><b>Multiscale Models</b></a>,
and <a href="../ContributedSoftware/viewdock/framevd.html" 
target="_top"><b>ViewDock</b></a>
</ul>
Not included:
<ul>
<li>the status of many other tools such as the
<a href="chimerawindow.html#emulator"><b>Command Line</b></a>
and <a href="sideview.html#sideview"><b>Side View</b></a>
<li><a href="preferences.html">preferences</a> settings
(the <a href="preferences.html#preffile">
<b>preferences</b> file</a> can be changed between saving and restarting
a session)
<li>which <a href="preferences.html#preffile">
<b>preferences</b> file</a> is being used (an issue
when there are different preferences files in different locations
and a session file has been moved from its original location)
</ul>
</p>
<hr>
<address>UCSF Computer Graphics Laboratory / November 2009</address>
</body></html>
