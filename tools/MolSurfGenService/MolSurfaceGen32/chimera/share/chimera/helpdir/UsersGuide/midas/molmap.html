<!--
--- UCSF Chimera Copyright ---
Copyright (c) 2008-2009 Regents of the University of California.
All rights reserved.  This software provided pursuant to a
license agreement containing restrictions on its disclosure,
duplication and use.  This notice must be embedded in or
attached to all copies, including partial copies, of the
software or any revisions or derivations thereof.
--- UCSF Chimera Copyright ---
-->

<html><head>
<title>molmap</title>
</head><body>
<font size="-1">
<a href="../framecommand.html" target="_top">Chimera Commands Index</a>
</font>

<h3><a href="usageconventions.html">Usage</a>:
 <BR><b>molmap</b> 
 <a href="frameatom_spec.html" target="_top"><i>atom-spec</i></a> 
 <i>resolution</i> <a href="#options"><i>options</i></a></h3>
<p>
The command <b>molmap</b> generates a density map
from the <a href="frameatom_spec.html" target="_top">specified</i></a> atoms.
Each atom is described as a 3D Gaussian distribution of
width proportional to the <i>resolution</i> and
amplitude proportional to the atomic number.
A map of the combined densities is generated and opened as a data set in
<a href="../../ContributedSoftware/volumeviewer/framevolumeviewer.html"
target="_top"><b>Volume Viewer</b></a>.  Map display can be adjusted
and the map saved to a file using 
<a href="../../ContributedSoftware/volumeviewer/framevolumeviewer.html"
target="_top"><b>Volume Viewer</b></a>
or the command <a href="volume.html"><b>volume</b></a>.
</p><p>
The <b>molmap</b> command is based on the <b>pdb2mrc</b> program in the
<a href="http://blake.bcm.tmc.edu/eman/eman1/" target="_blank">EMAN
package.</a> 
</p>

<a name="options">
<h4>Options</h4></a>
<p>
Option keywords for <b>molmap</b>
can be truncated to unique strings, and their case does not matter.  
Synonyms for true: True, 1.  Synonyms for false: False, 0.
A vertical bar "|" designates mutually exclusive options, and
default settings are indicated with <b>bold</b>.
</p>
<blockquote>
  <b>gridSpacing</b> <i>s</i> 
  <br>The grid spacing <i>s</i> (default <b><i>resolution</i>/3</b>)
  is the separation of points along the X, Y, and Z axes of the generated map.
</blockquote>
<blockquote>
  <b>edgePadding</b> <i>p</i> 
  <br>The edge padding <i>p</i> (default <b>3*<i>resolution</i></b>)
  sets map dimensions relative to the bounding box of the atom centers.
  Each face of the volume data box is offset outward by <i>p</i> from the
  corresponding bounding box face.
</blockquote>
<blockquote>
  <b>cutoffRange</b> <i>r</i> 
  <br>How many standard deviations &sigma; (default <b>5</b>)
  of each Gaussian distribution to include in the map.  
  Omitting the tails speeds up map calculation.
</blockquote>
<blockquote>
  <a name="sigmaFactor"><b>sigmaFactor</b> <i>f</i></a> 
  <br>Together with the <i>resolution</i>, the sigma factor <i>f</i> determines 
  the width of the Gaussian distribution used to describe each atom:
  <blockquote>
  &sigma; = <i>f</i>(<i>resolution</i>)
  </blockquote>
  By default, <i>f</i> = <b>1/(&pi; * 2<sup>&frac12;</sup>) &asymp; 0.225</b> 
  which makes the Fourier transform (FT) of the distribution 
  fall to 1/<i>e</i> of its maximum value at wavenumber 1/<i>resolution</i>.  
  Other plausible choices:
  <ul>
  <li> 1/(&pi; * (2/log2)<sup>&frac12;</sup>) &asymp; 0.187 makes the FT 
  fall to half maximum at wavenumber 1/<i>resolution</i>
  <li> 1/(2 * 2<sup>&frac12;</sup>) &asymp; 0.356 makes the Gaussian 
  width at 1/<i>e</i> maximum height equal the <i>resolution</i>
  <li> 1/(2 * (2log2)<sup>&frac12;</sup>) &asymp; 0.425 makes the Gaussian
  width at half maximum height equal the <i>resolution</i>
  </ul> 
</blockquote>
<blockquote>
  <b>displayThreshold</b> <i>m</i> 
  <br>Set the initial contour level to enclose a fraction <i>m</i>
  (default <b>0.95</b>) of the total mass in the map.  The fraction 
  equals the sum of grid point values above the contour level
  divided by the sum of all grid point values.
</blockquote>
<blockquote>
  <b>modelId</b> <i>N</i> 
  <br>Open the map as model number N (an integer, optionally preceded by #). 
  Submodel specifications #N.N (# required) can also be given.
  If the source atoms belong to a single model, the default is 
  the same model number as the atoms; if the atoms belong to multiple models,
  the default is the lowest unused number.
</blockquote>
<blockquote>
  <b>replace</b> <b>true</b>|false
  <br>Whether to close any map previously created by <b>molmap</b>
  from the same set of atoms.
</blockquote>
<blockquote>
  <b>showDialog</b> <b>true</b>|false
  <br>Whether to show the 
  <a href="../../ContributedSoftware/volumeviewer/framevolumeviewer.html"
  target="_top"><b>Volume Viewer</b></a> dialog after creating the map.
</blockquote>
<p>
See also:
<a href="volume.html"><b>volume</b></a>,
<b><A href="measure.html#correlation">measure correlation</A></b>,
<a href="meshmol.html"><b>meshmol</b></a>
</p>
</body></html>
