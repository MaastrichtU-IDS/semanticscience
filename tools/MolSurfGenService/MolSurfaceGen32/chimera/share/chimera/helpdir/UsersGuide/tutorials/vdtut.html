<!--
--- UCSF Chimera Copyright ---
Copyright (c) 2000-2007 Regents of the University of California.
All rights reserved.  This software provided pursuant to a
license agreement containing restrictions on its disclosure,
duplication and use.  This notice must be embedded in or
attached to all copies, including partial copies, of the
software or any revisions or derivations thereof.
--- UCSF Chimera Copyright ---
-->

<html><head>
<title>ViewDock Tutorial</title>
</head><body>
<font size="-1">
<a href="../frametut.html" target="_top">Chimera Tutorials Index</a>
</font>

<h2>ViewDock Tutorial</h2>
<p>
<a href="http://dock.compbio.ucsf.edu/index.html" target="_blank">DOCK</a>
calculates possible binding modes, given the structures of
ligand and receptor molecules.
In a DOCK search, each compound (typically from a database of many thousands)
is treated as a possible ligand, and the structure
of a target macromolecule is treated as the receptor.
Various scoring methods are used to identify the most favorable binding modes
of a given molecule and then to rank the molecules.
The output consists of many candidate ligands in their best-scoring poses.
It is then up to human users to look through the results
and decide which compounds should be tested in the real world.
For further details, please consult the
<a href="http://dock.compbio.ucsf.edu/index.html" target="_blank">DOCK
web site</a>.
</p><p>
<a href="../../ContributedSoftware/viewdock/framevd.html"
target="_top"><b>ViewDock</b></a>
facilitates the interactive selection of compounds from the output of DOCK.
In this tutorial,
the results of docking a small database of 30 compounds to the protein H-ras
(from Protein Data Bank entry 121P) are used to illustrate the workings
of <b>ViewDock</b>.
See the <a href="../../ContributedSoftware/viewdock/framevd.html"
target="_top"><b>ViewDock</b> manual page</a> 
for a more formal description of the program.
</p><p>
<a name="downloadfiles">
To follow along with the tutorial,
</a>
first <a href="download.html">download</a> the following files
to a convenient location (all should be placed in the same folder or directory):
<ul>
<li> <a href="ras.mol2">ras.mol2</a> - the docked molecules
output by DOCK 4, in Mol2 format
<li> <a href="receptor.pdb">receptor.pdb</a> 
- the structure of the receptor, H-ras, from PDB entry 121p
<li> <a href="GCP.pdb">GCP.pdb</a> - the co-crystallized ligand GCP 
(a GTP analog) from PDB entry 121p, for comparison with docked molecules
<li> <a href="setup.com">setup.com</a> - a file containing commands 
to set up the viewing context
</ul>
On <b>Windows</b>/<b>Mac</b>, click the <b>chimera</b> icon;
on <b>UNIX</b>, start Chimera from the system prompt:
<blockquote><tt>
<i>unix</i>: <b>chimera</b>
</tt></blockquote>
A splash screen will appear, to be replaced in a few seconds
by the main Chimera window.  If you like, resize the Chimera window
by dragging its lower right corner.
</p><p>
Start <b>ViewDock</b> (<b>Tools... 
Surface/Binding Analysis... ViewDock</b>), and with the resulting dialog,
locate and open ras.mol2, the file of docked ligands.
</p>
<table border="1" style="margin:8px 8px 8px 8px" align="right">
<tr><td><img src="../../ContributedSoftware/viewdock/listbox.png"></td></tr>
</table>
<p>
The <b>ViewDock</b> <b>ListBox</b> will appear, and the first
ligand in the file will be displayed in the graphics window.
Move the <b>ListBox</b> aside if it is obstructing the graphics window
or any of the other tools.
</p><p>
Next, we will open the structures of the receptor and its co-crystallized 
ligand and display them in a way that is convenient for evaluating the
docked molecules.  Often many different files of docked molecules 
will need to be evaluated in the context of the same receptor.
It can be tedious to set up the same view over and over.
One approach is to save a <a href="../sessions.html#sesdef">session</a>
with the target protein displayed as desired,
and then repeatedly restart that session before opening different files
of docked ligands with <b>ViewDock</b>.  Another approach (used
in this tutorial) is to put the necessary commands in a file and simply 
execute the <a href="../indexcommand.html#cmdfile">command file</a> as needed.
</p><p>
The command file (<a href="setup.com">setup.com</a>) contains:
<blockquote><tt><b>
<a href="../midas/open.html">open</a> receptor.pdb
<br><a href="../midas/open.html">open</a> GCP.pdb
<br><a href="../midas/preset.html">preset</a> apply interactive 1
<br><a href="../midas/color.html">color</a> aquamarine #1
<br><a href="../midas/display.html">disp</a> #1 & #0 z<5 
<br><a href="../midas/color.html">color</a> orange,a #1@o=
<br><a href="../midas/color.html">color</a> medium blue,a #1@n=
<br><a href="../midas/color.html">color</a> magenta #2
<br><a href="../midas/represent.html">repr bs</a> #2
</b></tt></blockquote>
Simply opening a command file will execute its contents.
Choose <b>File... Open</b>, make sure the file type is 
<b>all (guess type)</b> or
<b>Chimera commands</b>, and locate and open setup.com.
It may take a few seconds to execute the commands.
</p><p>
The lowest available model number is used for each successive
structure opened, so the docked molecules (opened before the command file) 
are model number 0, the receptor is model 1, and GCP is model 2. 
Besides opening structures, the command file applies a
ribbon/sticks <a href="../menu.html#menupresets">preset</a>,
colors the receptor aquamarine, and displays receptor
residues within 5 &Aring; of any docked molecule.
Oxygen atoms in the receptor are colored orange, nitrogens medium blue.
The co-crystallized ligand GCP is shown in magenta ball-and-stick.
</p><p>
Throughout the tutorial, adjust the view as desired
<a href="../mouse.html">with the mouse</a> and 
<a href="../sideview.html#sideview"><b>Side View</b></a>
(<b>Tools... Viewing Controls... Side View</b>).
</p><p>
The co-crystallized ligand GCP (shown in magenta) 
indicates the location of the active site.
Ctrl-click to select any atom in GCP, press the keyboard up arrow
to promote the selection to the whole residue, and then hide it:
<blockquote>
<i>Menu</i>:&nbsp;<b>Actions... Atoms/Bonds... hide</b>
<br>
<i>Menu</i>:&nbsp;<b>Select... Clear Selection</b>
</blockquote>
The docked compounds are enumerated in the top part of the 
<b>ViewDock ListBox</b>.
If the <b>ListBox</b> has become obscured by 
other windows, it can be resurrected with <b>Tools... ViewDock</b>
(near the bottom of the menu, below the horizontal line)<b>... Raise</b>.
Since in this case <b>Name</b> is not very informative, it may be helpful
to add other descriptors to the listing.  Use the <b>Column</b> 
menu to show <b>Description</b> and <b>Energy score</b>,
and to hide <b>Name</b> and <b>Number</b>.
</p><p>
Clicking on a line <b><i>chooses</b></i> the corresponding compound:
the line is highlighted, just the chosen compound is shown in the 
main graphics window, and more detailed information is shown
in the lower part of the <b>ListBox</b>.
Try clicking various lines in the <b>ListBox</b> to 
choose different docked molecules.  Multiple compounds may be chosen at once.
<b>Ctrl</b>-click adds to an existing choice rather than replacing it.
To choose a block of compounds without having to hold down
the mouse button, click on the first (or last) and then <b>Shift</b>-click
on the last (or first) in the desired block.
</p><p>
The listing can be sorted by any column, by clicking
on the header.  Make sure the list is sorted by
<b>Energy score</b>, with the most negative values 
(which are the most favorable) at the top.
Scroll down to the lowest line in the top panel of the <b>ListBox</b>
and click on it to choose the worst-scoring molecule.
</p>
<table style="margin:8px 8px 8px 8px" align="right">
<tr><th align="center">worst-scoring molecule</th></tr>
<tr><td><img src="leftfield.png"></td></tr>
</table>
<p>
As shown in the figure, 
this compound is not docked in the active site like the others.
Its docking scores are zero.
</p><p>
There are three mutually exclusive states that can be assigned
to docked compounds.  <b>Viable</b> compounds are interesting (or
have not been looked at yet), <b>Deleted</b> compounds are less interesting
but may deserve another look, and <b>Purged</b> compounds are definitely
not interesting.  The <b>S</b> column shows <b>V</b>, <b>D</b>, 
and <b>P</b> to indicate these states.  
Viable and deleted but not purged molecules are included when
<b>File... Rewrite</b> is used.  Change the status of the worst-scoring
molecule to purged by clicking the <b>Purged</b> checkbox 
near the bottom of the <b>ListBox</b>.
Note that its listing disappears; make it reappear
by checking the box next to <b>List Purged</b> in the <b>Compounds</b> menu.
</p><p>
Normally, a user will click on successive lines, 
examine the compounds in the binding site,
and change the status of less interesting compounds to deleted or purged.
Compounds can also be
<a href="../../ContributedSoftware/viewdock/viewdock.html#byvalue">chosen
by descriptor values</a> and then changed in status collectively.
Several sessions may be needed to whittle the list down sufficiently.
</p><p>
As an example, choose compounds based on their hydrogen-bonding
interactions with the receptor.  
<b>HBonds... Add Count to Entire Receptor</b> will bring up the
<a href="../../ContributedSoftware/findhbond/findhbond.html">
<b>FindHBond</b></a> tool.  Make sure the <b>inter-model</b>
mode is set.  The hydrogen bonds will be shown as lines. 
Increase the <b>Line width</b> to 3 and change the
<b>H-bond color</b> to yellow (clicking the 
<a href="../coloring.html#colorwell">color well</a> opens the
<a href="../colortool.html"><b>Color Editor</b></a>, in which a
new color can be chosen).  Click <b>OK</b>.
When the calculation is finished, new columns of descriptors will appear
in the <b>ListBox</b>.  Again, individual compounds can be examined
by clicking on their respective lines in the <b>ListBox</b>.
Use the <b>Column</b> menu to hide the descriptors
<b>HBond Ligand Atoms</b> and <b>HBond Receptor Atoms</b>
(the numbers of ligand and receptor atoms, respectively, 
participating in the detected ligand-receptor hydrogen bonds).
</p><p>
<b>Compounds... Choose by Value</b> opens an interface with
several sections.  Choose from <b>Viable</b> compounds and
uncheck the boxes next to <b>Description</b> and <b>Energy score</b>
to collapse the corresponding sections.  In the <b>HBonds (all)</b> 
section, move the sliders to include 0-1 hydrogen bonds. 
A message near the top of the <b>Choose by Value</b> dialog 
will report that 17 of the 29 viable compounds meet the criteria.
Click <b>OK</b> to choose the compounds and dismiss the dialog.
The 17 viable compounds with 0-1 hydrogen bonds to the receptor 
will be chosen in the <b>ListBox</b> and displayed in the main Chimera window.  
Change these compounds to purged by clicking
the <b>Purged</b> checkbox near the bottom of the <b>ListBox</b>.
Uncheck the box next to <b>List Purged</b> in the <b>Compounds</b> menu
to remove the purged compounds from the listing.
</p><p>
Finally, flip through the remaining listed compounds with
the <b>Movie</b> feature.  First, show the surface of the protein
and make it transparent:
<blockquote>
<i>Menu</i>:&nbsp;<b>Select... Structure... protein</b>
<br>
<i>Menu</i>:&nbsp;<b>Actions... Surface... show</b>
<br>
<i>Menu</i>:&nbsp;<b>Actions... Surface... transparency... 60%</b>
<br>
<i>Menu</i>:&nbsp;<b>Select... Clear Selection</b>
</blockquote>
<table style="margin:8px 8px 8px 8px" align="right">
<tr><th align="center">binding site surface and H-bonds</th></tr>
<tr><td><img src="glucosehb.png"></td></tr>
</table>
In the <b>ListBox</b> menu, choosing <b>Movie... Play</b> 
flips through all of the listed compounds, in the order in which 
they are listed, regardless of status.
It is possible to change the view and move the
molecules around while the movie is playing.
The movie will loop continuously through the list until halted with
<b>Movie... Stop</b>.  
The length of time each compound is shown can be controlled with 
<b>Movie... Options</b>.  If molecules are "unlisted"
using the checkboxes in the <b>Compounds</b> menu, they are not
included in the movie; in addition, the order of display depends on
how the molecules are sorted.
No matter how the molecules are sorted in the <b>ListBox</b>, however,
they remain in the original
order (minus any purged compounds) in output files created with
<b>File... Rewrite</b>.  Once you have seen enough, stop the movie and
exit from Chimera.
</p>
<hr>
<address>meng-at-cgl.ucsf.edu / August 2009</address>
</body></html>
