<!--
--- UCSF Chimera Copyright ---
Copyright (c) 2004, 2007 Regents of the University of California.
All rights reserved.  This software provided pursuant to a
license agreement containing restrictions on its disclosure,
duplication and use.  This notice must be embedded in or
attached to all copies, including partial copies, of the
software or any revisions or derivations thereof.
--- UCSF Chimera Copyright ---
-->

<html><head>
<title>Lighting Details</title>
</head><body>
<h2>Lighting Details</h2>
<p>
Two lights illuminate the scene in Chimera.
Generally, the <b><i>key</i></b> light is the dominant
(brighter) source of light and the <b><i>fill</i></b> light
serves as a secondary source to improve the visibility of regions 
that would otherwise be dark.
This scheme is based loosely on the classic three-point lighting method,
but without the back light.
The key and fill lights each have directionality and can include 
diffuse and specular contributions:
<b><i>diffuse</i></b> light is scattered from a surface equally 
in all directions, whereas <b><i>specular</i></b> light is reflected 
in a preferred direction.
The default fill light in Chimera has zero specular contribution
and is treated as shadowless during <a href="raytracing.html">raytracing</a>.
</p><p>
To convey the three-dimensional nature of a scene, the best direction
for lighting is not along the line of sight like a headlamp,
but oblique, somewhat from the side and above 
(from over the viewer's shoulder).  
Key and fill lights are often placed to converge from partially opposing
directions, with the key light coming from a higher angle.
</p><p>
The light directions and their diffuse and specular parameters
can be controlled in the <a  href="sideview.html#basiclight">basic</a> and
<a  href="sideview.html#advancedlight">advanced</a> interfaces of the
<a href="sideview.html#lighting"><b>Lighting</b> tool</a>.
The specular parameters of objects in the scene can be controlled in the
<a  href="sideview.html#shininess"><b>Shininess</b> section</a>.
</p><p>
Due to the many interacting parameters, the overall effect of
changing some aspect of lighting can be unexpected.
If adjusted at all, lighting should be the last thing
adjusted before images are saved.
</p>

<a name="combination">
<h3>Combination Rules</h3>
</a><p>
"Object" will be used to refer to any item in the view.
The illumination at a point on an object's surface 
due to a particular light source depends on several things:
<ul>
<li>the inherent color and intensity of the light
(the <b>color</b> and <b>scale</b> values in the
<a href="sideview.html#advancedlight">advanced lighting interface</a>)
<li>the direction of the light
<li>the surface normal
<li>for specular light only, the position of the viewer
</ul>
The key and fill lights in Chimera do not attenuate with distance.
</p><p>
The key/diffuse, fill/diffuse, key/specular, and fill/specular lights
can be treated as four separate contributions.
The color shown for a point on an object's surface is generated by
the following process:
<ol>
<li>The object's color component values (RGB, meaning red, green, blue)
are <b>multiplied</b> by the scaled <b>diffuse</b> 
color component values due to each light,
yielding a set of RGB values for the key/diffuse light 
and a set for the fill/diffuse light. 
<br><br>
<li>Similarly, the object's <b>specular</b> color component values
(spatially modulated according to the object's
<a href="sideview.html#shininess">shininess</a>
and scaled by the object's specular
<a href="sideview.html#shininess">brightness</a>)
are <b>multiplied</b> by the scaled <b>specular</b>
color component values due to each light, 
yielding a set of RGB values for the key/specular light 
and a set for the fill/specular light.
<br><br>
<li>The four sets of RGB values are <b>added</b> to
generate the color shown for the point.
When a <b>scale</b> factor (see the 
<a href="sideview.html#advancedlight">advanced lighting interface</a>)
is negative, however, the corresponding contribution
is effectively subtracted.  Light subtraction is nonphysical
but possible in Chimera.
</ol>
Multiplying color component values has the effect of intersection.
For example, multiplying red (RGB values 1,0,0), and blue (0,0,1) gives black:
<blockquote><pre>
net red component = (1)(0) = 0
net green component = (0)(0) = 0
net blue component = (0)(1) = 0
(0,0,0) = black
</pre></blockquote>
Adding red and blue gives magenta:
<blockquote><pre>
net red component =  1 + 0  = 1
net green component =  0 + 0  = 0
net blue component =  0 + 1  = 1
(1,0,1) = magenta
</pre></blockquote>
</p>
<hr>
<address>UCSF Computer Graphics Laboratory / December 2007</address>
</body></html>
