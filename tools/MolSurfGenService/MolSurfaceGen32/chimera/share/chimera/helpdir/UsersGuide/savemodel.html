<!--
--- UCSF Chimera Copyright ---
Copyright (c) 2004-2009 Regents of the University of California.
All rights reserved.  This software provided pursuant to a
license agreement containing restrictions on its disclosure,
duplication and use.  This notice must be embedded in or
attached to all copies, including partial copies, of the
software or any revisions or derivations thereof.
--- UCSF Chimera Copyright ---
-->

<html><head>
<title>Modifying and Saving Data</title>
</head><body>
<h2>Modifying and Saving Data</h2>
<p>
The state of Chimera (including data) can be saved to a
<a href="sessions.html">session</a> file and later restored.
</p>
<ul>
<li>Atomic coordinate data can be modified by
 <ul>
 <li><a href="../ContributedSoftware/editing/editing.html#deletion">deleting 
 atoms</a>
 <li><a href="../ContributedSoftware/structuremeas/structuremeas.html#adjust">
 bond rotation</a>
 <li>amino acid <a href="../ContributedSoftware/rotamers/framerot.html"
 target="_top">rotamer swapping</a>
 <li>adding
 <a href="../ContributedSoftware/addh/addh.html">hydrogens</a>,
 <a href="../ContributedSoftware/addions/addions.html">counterions</a>,
 and <a href="../ContributedSoftware/solvate/solvate.html">solvent</a>
 <li>structure
 <a href="../ContributedSoftware/editing/editing.html">building</a> and
 <a href="../ContributedSoftware/minimize/minimize.html">minimization</a>
 <li>generating multimers with 
 <a href="../ContributedSoftware/multiscale/framemulti.html" target="_top">
 <b>Multiscale Models</b></a> or 
 <a href="../ContributedSoftware/unitcell/unitcell.html"><b>Unit Cell</b></a>
 <li>simply moving entire models as rigid bodies, such as when
 <a href="superposition.html">superimposing structures</a> or
 <a href="../ContributedSoftware/fitmaps/fitmaps.html">fitting</a> them into maps
 </ul>
 and saved using the command <a href="midas/write.html"><b>write</b></a> 
 or the dialogs described below for 
 <a href="#pdb">PDB</a> and <a href="#mol2">Mol2</a>.
<br><br>
<li><a href="filetypes.html#volume">Volume data</a> can be modified by
 <ul>
 <li><a href="../ContributedSoftware/volumeviewer/framevolumeviewer.html"
 target="_top"><b>Volume Viewer</b></a> (see
 <a href="../ContributedSoftware/volumeviewer/volumeviewer.html#coordinates">
 Coordinates</a>,
 <a href="../ContributedSoftware/volumeviewer/volumeviewer.html#bounds">
 Region bounds</a>,
 <a href="../ContributedSoftware/volumeviewer/volumeviewer.html#mouseselect">
 Subregion selection</a>, and
 <a href="../ContributedSoftware/volumeviewer/volumeviewer.html#zone">Zone</a>)
 <li><a href="../ContributedSoftware/voleraser/voleraser.html">
 <b>Volume Eraser</b></a>
 <li><a href="../ContributedSoftware/volumeviewer/gaussian.html"><b>Volume
 Filter</b></a>
 <li>the commands <a href="midas/volume.html"><b>volume</b></a>,
 <a href="midas/mask.html"><b>mask</b></a>, and 
 <a href="midas/vop.html"><b>vop</b></a>
 <li><a href="../ContributedSoftware/accelerators/accelerators.html">keyboard
 shortcuts</a> for
 <a href="../ContributedSoftware/accelerators/alist.html#voledit">volume
 editing</a>
 </ul>
 and saved using 
 <a href="../ContributedSoftware/volumeviewer/framevolumeviewer.html"
 target="_top"><b>Volume Viewer</b></a> (the 
 <a href="../ContributedSoftware/volumeviewer/volumeviewer.html#organization">
 File menu</a>)
 or the command <a href="midas/volume.html"><b>volume</b></a>.
<br><br>
<li><a href="filetypes.html#alignment">Sequence alignments</a> can be
 <a href="../ContributedSoftware/multalignviewer/multalignviewer.html#editing">
 edited and saved</a> using
 <a href="../ContributedSoftware/multalignviewer/framemav.html"
 target="_top"><b>Multalign Viewer</b></a>.
</ul>
<p>
See also:
<a href="export.html">exporting a scene</a>,
<a href="dms.html#writedms"><b>Write DMS</b></a>,
<a href="../ContributedSoftware/addions/writeprmtop.html"><b>Write 
Prmtop</b></a>
</p>

<h3><a name="pdb">Saving PDB Files</a></h3>
<p>
The dialog for saving <a href="tutorials/framepdbintro.html"
target="_top">PDB</a> files can be invoked with
<b>File... Save PDB</b> or <b>Actions... Write PDB</b>
in the <a href="menu.html">Chimera menu</a>, the <b>Write PDB...</b>
button on the <a href="inspection.html"><b>Selection Inspector</b></a>, or
<a href="modelpanel.html#writepdb"><b>write PDB</b></a> 
in the <a href="modelpanel.html"><b>Model Panel</b></a>.
The dialog resembles other <a href="opensave.html">open/save dialogs</a>,
but has additional specific options.
See also: <a href="midas/write.html"><b>write</b></a> 
</p><p>
<a name="chosen">Individual models or blocks of models can be chosen</a> 
from the <b>Save models</b> list with the left mouse button.  
Ctrl-click toggles the status of an individual model.
To choose a block of models without dragging,
click on the first (or last) and then Shift-click 
on the last (or first) in the desired block.
Only molecule models are listed.
</p><p>
Options:
<ul>
<li> <b>Save displayed atoms only</b> - only write coordinates of atoms 
that are displayed
<li> <b>Save selected atoms only</b> - only write coordinates of atoms 
that are <a href="selection.html">selected</a>
</ul>
Option when only one model is present:
<ul>
<li> <b>Use untransformed coordinates</b> - write coordinates without
applying any rotations and translations that have been performed in Chimera
</ul>
Option when more than one model is present:
<ul>
<li> <b>Save relative to model [<i>model</i>]</b> -
save coordinates relative to the untransformed coordinates of a
specified reference <i>model</i> 
(otherwise, transformed coordinates will be saved).
This is useful for preserving the spatial relationship between models.  
For example, if model 1 has been matched or docked to model 0, 
saving 1 relative to 0 results in the models being matched 
or docked in the same way when the model 0 file (original) and 
the model 1 file (saved relative to 0) are reopened.
</ul>
Option when more than one model is <a href="#chosen">chosen</a>:
<ul>
<li> <b>Save multiple models in</b>
  <ul>
  <li> <b>a single file</b> 
  - one PDB file containing all chosen models, with
  <tt>MODEL/ENDMDL</tt> records delimiting the coordinates of each
  (technically, this treatment is only correct for models with identical 
  sets of atoms, but may be convenient in the more general case of disparate
  models)
  <li> <b>multiple files [appending model number]</b> 
  - a different PDB file for each model, named by appending
  model ID number (<b><i>model</i></b> or <b><i>model.submodel</i></b>)
  to the specified file name, before the ".pdb" suffix, if present
  </ul>
</ul>
If one or more of the chosen models contains a trajectory, there will also be
an option to <b>Save</b> the <b>current frame</b> or <b>all frames</b>.
In this context, "all frames" means all frames whose coordinate sets have been
<a href="../ContributedSoftware/movie/movie.html#framesread">read in</a>
with <a href="../ContributedSoftware/movie/framemovie.html"
target="_top"><b>MD Movie</b></a>.
A model will not be recognized as a trajectory until more than one
set of coordinates has been read.
</p><p>
Besides atomic coordinates, 
<a href="tutorials/pdbintro.html#secondary">HELIX and SHEET records</a>
reflecting the current protein <a href="midas/ksdssp.html">secondary structure 
assignments</a> are written, along with any other header lines 
read from PDB input.  Even if protein helix/strand assignments have not been
changed in Chimera, the output HELIX and SHEET records may differ from 
the input because helices are written assuming the right-handed &alpha; type,
and strands are written as if each were a separate sheet.
</p>

<h3><a name="mol2">Saving Mol2 Files</a></h3>
<p>
The dialog for saving <a href="#mol2info">Mol2</a> files can be invoked with
<b>File... Save Mol2</b> in the <a href="menu.html">Chimera menu</a>.
The dialog resembles other <a href="opensave.html">open/save dialogs</a>,
but has additional specific options.
See also: <a href="midas/write.html"><b>write</b></a> 
</p><p>
<a name="chosen2">Individual models or blocks of models can be chosen</a> 
from the <b>Save models</b> list with the left mouse button.  
Ctrl-click toggles the status of an individual model.
To choose a block of models without dragging,
click on the first (or last) and then Shift-click 
on the last (or first) in the desired block.
Only molecule models are listed.
</p><p>
Option when only one model is present:
<ul>
<li> <b>Use untransformed coordinates</b> - write coordinates without
applying any rotations and translations that have been performed in Chimera
</ul>
Option when more than one model is present:
<ul>
<li> <b>Save relative to model [<i>model</i>]</b> - save coordinates
relative to the untransformed coordinates of a specified 
reference <i>model</i> (otherwise, transformed coordinates will be saved)
</ul>
Option when more than one model is <a href="#chosen2">chosen</a>:
<ul>
<li> <b>Save multiple models in</b>
  <ul>
  <li> <b>a single file [individual @MOLECULE sections]</b> 
  <li> <b>multiple files [appending model number]</b>
  - a different Mol2 file for each model, named by appending
  model ID number (<b><i>model</i></b> or <b><i>model.submodel</i></b>)
  to the specified file name, before the ".mol2" suffix, if present
  <li> <b>a single file [combined @MOLECULE section]</b> 
  - if the models are all single-residue and the model names are unique 
  but the residue types are not, the model names will be used as 
  substructure names, and the option to include residue numbers in
  substructure names (below) will be ignored
  </ul>
</ul>
Further options:
<ul>
<li><b>Use Sybyl-style hydrogen naming (e.g. HE12 rather than 2HE1)</b>
- move leading numerals to the ends of hydrogen names
<li><b>Include residue sequence numbers in substructure names</b>
- generate substructure names with embedded residue numbers,
for example, ALA85 rather than ALA
<li><a name="writegaff">
<b>Write Amber/GAFF atom types instead of Sybyl atom types</b></a>
- include the Amber/GAFF atom types assigned by
<a href="../ContributedSoftware/addcharge/addcharge.html"><b>Add Charge</b></a>
(or command <a href="midas/addcharge.html"><b>addcharge</b></a>) instead of
<a href="http://www.tripos.com/mol2/atom_types.html" target="_blank">Sybyl 
atom types</a>; if any atom in the <a href="#chosen">chosen</a> models
lacks an Amber/GAFF type assignment, file-writing will halt and
an error message will be displayed.  ** Mol2 files with Amber/GAFF types
are not suitable for reading back into Chimera, as the types are
likely to be misinterpreted. **
<li><b>Write current selection to @SETS section of file</b>
- make the currently 
<a href="selection.html">selected</a> atoms a SET 
(as used to specify the rigid portion of a ligand in
<a href="http://dock.compbio.ucsf.edu/index.html" target="_blank">DOCK</a>)
</ul>
<a name="mol2info"></a>
<a href="http://www.tripos.com/index.php?family=modules,SimplePage,,,&page=sup_mol2&s=0"
target="_blank">Mol2 format</a>
includes atom types and (optionally) partial charges.
When a structure is read from a Mol2 file, the
<a href="http://www.tripos.com/mol2/atom_types.html" target="_blank">Sybyl 
atom types</a> and any partial charges are stored as the atom
<a href="../ContributedSoftware/defineattrib/defineattrib.html#attribdef">attributes</a> 
<b>mol2type</b> and <b>charge</b>.
Unless the user specifies <a href="#writegaff">writing Amber/GAFF types
instead</a>, output Mol2 files include Sybyl atom types.
The Sybyl types read from input will be used, if available; 
otherwise, <a href="idatm.html">Chimera atom types</a> will be translated
into Sybyl atom types.
As there is not a simple one-to-one relationship between Chimera and Sybyl
atom types, users may wish to check the Sybyl type assignments,
particularly for nonstandard residues.  
Values for the <b>charge</b>
<a href="../ContributedSoftware/defineattrib/defineattrib.html#attribdef">attribute</a>
can be assigned within Chimera, for example using
<a href="../ContributedSoftware/addcharge/addcharge.html"><b>Add 
Charge</b></a>.  If no <b>charge</b> values have been read or assigned, 
the partial charges will be written as zero.
</p>
<hr>
<address>UCSF Computer Graphics Laboratory / November 2009</address>
</body></html>
