<!--
--- UCSF Chimera Copyright ---
Copyright (c) 2002-2008 Regents of the University of California.
All rights reserved.  This software provided pursuant to a
license agreement containing restrictions on its disclosure,
duplication and use.  This notice must be embedded in or
attached to all copies, including partial copies, of the
software or any revisions or derivations thereof.
--- UCSF Chimera Copyright ---
-->

<html>
<head>
<TITLE>Ribbon Style Editor</TITLE>
</head>
<body>
<h3><a name="ribstyle">Ribbon Style Editor</a>
<img src="ribstyleicon.png" alt="icon"></h3>

<table align="right" width="230">
<tr><th align="center">
Barstar (1bta) ribbon with Chimera default <a href="#scaling">scaling</a>
in the <a href="#xsection">style</a> named <a href="#aitch">aitch</a>
</th></tr>
<tr><td>
<img src="ribaitch.png" alt="1bta (barstar)">
</td></tr>
</table>

<p>
<b>Ribbon Style Editor</b> allows ribbon
<a href="#scaling">scalings</a>,
<a href="#xsection">styles</a>,
and <a href="#class">residue classes</a>
to be edited directly and/or named and saved for subsequent use.
</p><p>
Ribbons for peptides, proteins, and nucleic acids
can be displayed using the command
<a href="../../UsersGuide/midas/ribbon.html"><b>ribbon</b></a> or
<A href="../../UsersGuide/menu.html#actribbon"><b>Actions... 
Ribbon... show</b></a>.
Ribbon <a href="#xsection">style</a> can be switched with
<a href="../../UsersGuide/midas/ribrepr.html"><b>ribrepr</b></a> or
<A href="../../UsersGuide/menu.html#actribbon"><b>Actions... Ribbon...
<i>style-name</i></b></a>.
Ribbon <a href="#scaling">scaling</a> can be switched with
<a href="../../UsersGuide/midas/ribscale.html"><b>ribscale</b></a>.
</p><p>
There are <a href="../../UsersGuide/extension.html">several ways to start</a>
<b>Ribbon Style Editor</b>, a tool in the <b>Depiction</b> category.
It has three panels shown as index cards:
<ul>
<li><a href="#scaling"><b>Scaling</b></a>
<li><a href="#xsection"><b>Cross Section</b></a>
<li><a href="#class"><b>Residue Class</b></a> 
</ul>
<b>Close</b> dismisses the dialog, and
<b>Help</b> opens this manual page in a browser window.
</p>

<h4><a name="scaling">SCALING</a></h4>
<p>
The <b><i>scaling</i></b> of a ribbon is its 
secondary-structure-specific dimensions.
Named scalings can be accessed with the command
<a href="../../UsersGuide/midas/ribscale.html"><b>ribscale</b></a>.
</p><p>
<b>Known problem</b>: reassigning secondary structure 
(for example, by using 
<a href="../../UsersGuide/midas/ksdssp.html"><b>ksdssp</b></a>)
sets the scaling of some residues to <b>Chimera default</b>; 
any other scalings previously in effect need to be reapplied.
</p><p>
In the <b>Scaling</b> panel of the
<a href="#ribstyle"><b>Ribbon Style Editor</b></a>,
changes can be entered directly, or the arrows on either side
of a field can be clicked to increase or decrease the value by
0.05-angstrom increments.  Only values greater than zero are allowed.
Changes will not take effect until either <b>Apply</b> or <b>OK</b>
is clicked; <b>OK</b> also dismisses the panel.
<b>Restrict OK/Apply...</b> allows the scaling to be applied to only
the current <a href="../../UsersGuide/selection.html">selection</a>.
If a scaling has been named, it can also be applied using the command
<a href="../../UsersGuide/midas/ribscale.html"><b>ribscale</b></a>.
</p><p>
If a ribbon were laid out on a flat surface, 
width would be the dimension parallel to the surface
but perpendicular to the long axis of the ribbon, and height
would be the dimension normal to the surface.  
The <b>Width</b> and <b>Height</b> values are doubled to give 
the maximum ribbon dimensions (the dimensions mapped to the 
<a href="#xsection">cross-section grid</a>).
For example, with any of the
<a href="#builtinstyles">built-in styles</a>,
a <b>Width</b> of 0.9 yields a ribbon 1.8 &Aring; wide.
</p><p>
Nucleic acid structures are shown with the <b>Nucleic</b> ribbon.
For proteins, <b>Helix</b> and <b>Sheet</b> 
assignments are taken from the input structure file or generated with
<a href="../../UsersGuide/midas/ksdssp.html"><b>ksdssp</b></a>;
the remainder is shown as <b>Turn</b>.
Strands (the <b>Sheet</b> segments) are shown by default as arrows
pointing in the C-terminal direction.  
To also show helices as arrows, see <a href="#helixarrow">below</a>.
Setting the <b>Arrow (tip)</b> and <b>Arrow (base)</b> widths the same as the
<b>Sheet</b> width turns off the arrow appearance.  Setting the
<b>Arrow tip</b> and <b>base</b> widths equal to the <b>Turn</b> width
also turns off the arrow appearance but shortens the strand somewhat.
Setting all the widths equally small
generates a simple spaghetti-like representation.
</p><p>
The settings in the <b>Scaling</b> panel collectively define a scaling,
which can be named, saved, and later retrieved from the pulldown list 
indicated by the solid black triangle next to the <b>Ribbon Scaling</b>
field.  When the name of a built-in scaling
(<b>Chimera default</b> or <b>licorice</b>) is shown, it is only
possible to save to a different name, using <b>Save As...</b>.
When another name is shown, it is possible to:
<ul>
<li><b>Save</b> the scaling to the name shown
<li>use <a name="saveas"><b>Save As...</b></a>
 to save the scaling to a new name
<li><a name="delete"><b>Delete</b></a> 
 the scaling whose name is shown (if previously saved)
</ul>
Named scalings are saved in the Chimera
<a href="../../UsersGuide/preferences.html#preffile"><b>preferences</b>
file</a>, and are only updated with any changes
when <b>Save</b>, <b>Save As...</b>, or <b>Delete</b> is used.
The settings in effect when a session is
<a href="../../UsersGuide/sessions.html#savesess">saved</a> 
(whether or not the scaling has a name) are included in the
<a href="../../UsersGuide/sessions.html">session file</a>.
</p><p>
<a name="helixarrow">
The <b>Arrow</b> parameters apply only to strands, not helices.</a>
To show arrowheads at the ends of helices, the workaround is to reassign
the secondary structure of the last residue in each helix as strand.
This can be done with commands something like:
<blockquote>
<i>Command</i>: <b><a href="../../UsersGuide/midas/setattr.html">setattr</a>&nbsp;r&nbsp;isHelix&nbsp;false&nbsp;:18.a,41.a,59.a,17.b</b>
<br> 
<i>Command</i>: <b><a href="../../UsersGuide/midas/setattr.html">setattr</a>&nbsp;r&nbsp;isStrand&nbsp;true&nbsp;:18.a,41.a,59.a,17.b</b>
</blockquote>
or by <a href="../../UsersGuide/selection.html">selecting</a> the residues
and changing their secondary structure attribute values in the
<a href="../../UsersGuide/inspection.html"><b>Selection Inspector</b></a>.
</p>

<table align="right">
<tr><th align="center"><a name="aitch">Custom style "aitch"</a></th></tr>
<tr><td>
<img src="ribstyle.png" alt="Cross Section aitch">
</td></tr>
</table>

<h4><a name="xsection">CROSS SECTION</a></h4>
<p>
The <b><i>style</i></b> of a ribbon is defined by its 
<b><i>cross section</i></b> (general shape perpendicular to the long axis) 
and how the cross section is <a href="#smoothing">smoothed</a>.
Named styles can be accessed with the command
<a href="../../UsersGuide/midas/ribrepr.html"><b>ribrepr</b></a> and from the
<A href="../../UsersGuide/menu.html#actribbon"><b>Actions... Ribbon</b> 
menu</a>.
</p><p>
In the <b>Cross Section</b> panel of the
<a href="#ribstyle"><b>Ribbon Style Editor</b></a>,
a cross-section can be defined by placing points on a grid.
The <b>Number of grid divisions</b> can be adjusted as needed
for the complexity of the desired cross-section.
A ribbon with a particular cross-section is subject to 
whichever <a href="#scaling">scaling</a> is in effect.  
The extent of the grid X-axis equals the width and
the extent of the grid Y-axis equals the height.
Using the <a name="builtinstyles">built-in styles</a>
as examples:
<ul>
<li>the <b>edged</b> (<b>sharp</b>) style
corresponds to a square outlining the grid; 
when width differs from height,
the cross-section is "squashed" to a rectangle
<li>the <b>flat</b> (<b>ribbon</b>) style
corresponds to a horizontal line bisecting the grid; 
only the width matters, as this style has no height
<li>the <b>rounded</b> (<b>round</b>, <b>smooth</b>) style
corresponds to the largest circle that fits in the grid; 
when width differs from height,
the cross-section is "squashed" to an oval
<li>the <b>supersmooth</b> style is the same as <b>rounded</b>,
except that its cross section is defined with a greater number of points
(useful when generating
<a href="../../UsersGuide/print.html#raytrace">raytraced</a> images)
</ul>
</p><p>
A style is further defined by
<a name="smoothing"><b>Display Options</b></a>:
<ul>
<li><b>Closed cross section</b> - close the cross section automatically
as it is being drawn on the grid (a line will connect the 
first and last points drawn); unnecessary if the closing line 
is created manually
<li><b>Smooth across ribbon</b> - slightly round the corners of the 
cross section when drawing the ribbon
<li><b>Smooth along ribbon</b> - generate a ribbon that flows smoothly
from one residue to another (as opposed to a ribbon with obvious residue
segmentation)
</ul>
Changes will not take effect until either <b>Apply</b> or <b>OK</b> is 
clicked; <b>OK</b> also dismisses the panel.
<b>Restrict OK/Apply...</b> allows the style to be applied to only
the current <a href="../../UsersGuide/selection.html">selection</a>.
If a style has been named, it can also be applied using the command
<a href="../../UsersGuide/midas/ribrepr.html"><b>ribrepr</b></a> or 
by choosing its name from the
<A href="../../UsersGuide/menu.html#actribbon"><b>Actions... Ribbon</b> 
menu</a>.
</p><p>
The settings in the <b>Cross Section</b> panel collectively define 
a style, which can be named, saved, and later 
retrieved from the pulldown list indicated by the solid black triangle 
next to the <b>Ribbon Cross Section</b> field.
When the name of a <a href="#builtinstyles">built-in</a>
style is shown, it is only
possible to save to a different name, using <b>Save As...</b>.
When another name is shown, it is possible to:
<ul>
<li><b>Save</b> the style to the name shown
<li>use <a name="saveas"><b>Save As...</b></a>
 to save the style to a new name
<li><a name="delete"><b>Delete</b></a> 
 the style whose name is shown (if previously saved)
</ul>
Named styles are saved in the Chimera
<a href="../../UsersGuide/preferences.html#preffile"><b>preferences</b>
file</a>, and are only updated with any changes
when <b>Save</b>, <b>Save As...</b>, or <b>Delete</b> is used.
The settings in effect when a session is
<a href="../../UsersGuide/sessions.html#savesess">saved</a> 
(whether or not the style has a name) are included in the
<a href="../../UsersGuide/sessions.html">session file</a>.
</p>

<h4><a name="class">RESIDUE CLASS</a></h4>
<p>
A ribbon <b><i>residue class</i></b>
is defined by which atoms control the path of the ribbon and
<a name="mainchain">
which atoms are considered part of the backbone 
(<b><i>mainchain atoms</i></b>).
</a>
The path of the ribbon is controlled by two atoms per residue:
the <b><i>guide atom</i></b> sets ribbon location (the
path is smoothed over five successive residues), and the
<b><i>orientation atom</i></b> sets the plane of the ribbon.
</p><p>
By default, when ribbon is shown, mainchain atoms are
hidden and their locations are adjusted to fall on the ribbon
(see the command
<a href="../../UsersGuide/midas/ribbackbone.html"><b>ribbackbone</b></a>).
</p>
<table border>
<tr><th colspan="4" align="center">
<a name="builtinclasses">Built-in Ribbon Residue Classes</a></th></tr>
<tr><th>class</th>
<th>guide atom</th>
<th>orientation atom</th>
<th>mainchain atoms</th>
</tr><tr>
<td align="center"><b>amino acid</b></td>
<td align="center">CA</td>
<td align="center">O</td>
<td align="center">N,CA,C,O</td>
</tr><tr>
<td align="center"><b>nucleic acid</b></td>
<td align="center">C5'</td>
<td align="center">C1'</td>
<td align="center">P,O1P,O2P,O3P,O5',C5',O3'</td>
</tr></table>
There is also a <b>nucleic acid rotated</b> class, which differs from
the <b>nucleic acid</b> class only in that the option to
<a href="#rotate">rotate</a> the ribbon is on.
<p>
The <b>Residue Class</b> panel of the
<a href="#ribstyle"><b>Ribbon Style Editor</b></a>
allows new ribbon residue classes to be defined.
Names for the <b>Guide atom</b>, <b>Orientation atom</b>,
and <b>Mainchain Atoms</b> must be supplied; letters in these names
are automatically entered in uppercase.
A mainchain atom's <b>Position</b> is
how far along a residue's ribbon segment the atom is placed
when adjusted to fall on the ribbon (possible values range from 0 to 1).
Clicking <b>Set</b> adds the contents of the <b>Name</b> and <b>Position</b>
fields to the <b>Mainchain Atoms</b> list.
Choosing (clicking) an entry in the list and then clicking 
<b>Remove</b> deletes that entry.
</p><p>
Further <b>Options</b>:
<ul>
<li><b>Non-helix/sheet uses "Nucleic" scaling</b> -
whether the ribbon for residues without secondary structure assignments 
should have the <b>Nucleic</b> dimensions in the current
<a href="#scaling">scaling</a> scheme
(otherwise the <b>Turn</b> dimensions will be used)
<li><a name="rotate"><b>Rotate orientation 90 degrees</b></a> 
- whether the plane of the
ribbon should be perpendicular to a line drawn from the middle (widthwise) of
the ribbon to the orientation atom (otherwise parallel)
</ul>
Changes will not take effect until either <b>Apply</b> or <b>OK</b>
is clicked; <b>OK</b> also dismisses the panel.
<b>Restrict OK/Apply...</b> allows the changes to be applied to only
the current <a href="../../UsersGuide/selection.html">selection</a>.
</p><p>
The settings in the <b>Residue Class</b> panel collectively 
define a ribbon residue class, which can be named, saved, 
and later retrieved from the pulldown list indicated by the 
solid black triangle next to the <b>Ribbon Residue Class</b>
field.  When the name of one of the <a href="#builtinclasses">built-in
classes</a> is shown, it is only
possible to save to a different name, using <b>Save As...</b>.
When another name is shown, it is possible to:
<ul>
<li><b>Save</b> the class to the name shown
<li>use <a name="saveas"><b>Save As...</b></a>
 to save the class to a new name
<li><a name="delete"><b>Delete</b></a> 
 the class whose name is shown (if previously saved)
</ul>
Named classes are saved in the Chimera
<a href="../../UsersGuide/preferences.html#preffile"><b>preferences</b>
file</a>, and are only updated with any changes
when <b>Save</b>, <b>Save As...</b>, or <b>Delete</b> is used.
The settings in effect when a session is
<a href="../../UsersGuide/sessions.html#savesess">
saved</a> (whether or not the class has a name) are included in the
<a href="../../UsersGuide/sessions.html">session file</a>.
</p>
<hr>
<address>UCSF Computer Graphics Laboratory / September 2007</address>
</body></html>
