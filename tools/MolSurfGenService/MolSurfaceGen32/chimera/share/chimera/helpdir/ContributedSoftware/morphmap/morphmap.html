<!--
--- UCSF Chimera Copyright ---
Copyright (c) 2007-2009 Regents of the University of California.
All rights reserved.  This software provided pursuant to a
license agreement containing restrictions on its disclosure,
duplication and use.  This notice must be embedded in or
attached to all copies, including partial copies, of the
software or any revisions or derivations thereof.
--- UCSF Chimera Copyright ---
-->

<html>
<head>
<TITLE>Morph Map</TITLE>
</head>
<body>
<h3>Morph Map <img src="morphmapicon.png" alt="Morph Map icon"></h3>
<p>
<table border="1" align="right" style="margin:8px 8px 8px 8px">
<tr><td align=center><img src="emd_1283_1284.gif"></td></tr>
</table>
<b>Morph Map</b> morphs between two related sets of
<a href="../../UsersGuide/filetypes.html#volume">volume data</a> 
(<b><i>maps</i></b>).  The
data sets must have the same grid dimensions, spacing, and numbers of points.
By default, intermediate states are generated by linear interpolation.
A smooth progression from one map to the other 
can be displayed and recorded as a movie.  See also:
<a href="../volseries/volseries.html"><b>Volume Series</b></a>,
<a href="../../UsersGuide/movies.html">making movies</a>
</p><p>
There are <a href="../../UsersGuide/extension.html">several ways to start</a>
<b>Morph Map</b>, a tool in the <b>Volume Data</b> category
(including from the
<a href="../volumeviewer/framevolumeviewer.html" 
target="_top"><b>Volume Viewer</b></a> <b>Tools</b> menu).
It is also implemented as the command 
<a href="../../UsersGuide/midas/vop.html#morph"><b>vop morph</b></a>.
</p><p>
The <b>First map</b> and <b>Second map</b> should be chosen from the
adjacent lists of open volume data sets.  If the maps of interest
are not already open, the <b>Browse...</b> buttons can be
used to locate and open them.
</p><p>
Moving the <b>Fraction</b> slider generates the corresponding
interpolated state.  The morph is opened as new volume data set,
and its display settings
(<a href="../../ContributedSoftware/volumeviewer/volumeviewer.html#threshcolor">threshold level/color</a>,
<a href="../../ContributedSoftware/volumeviewer/volumeviewer.html#surf-options">surface smoothing</a>, <i>etc.</i>) can be adjusted in
<a href="../../ContributedSoftware/volumeviewer/framevolumeviewer.html"
target="_top"><b>Volume Viewer</b></a>.
<a name="fraction">At a fraction of 0.0, 
the interpolated map is the same as the <b>First map</b>, 
and at a fraction of 1.0, it is the same as the <b>Second map</b>.</a>
</p><p>
Clicking <b>Options</b> reveals 
additional settings that can be hidden again by clicking the small button
<img src ="../volumeviewer/x.png"</a> on the right.
<ul>
<li><b>Movie start [<i>f<sub>s</sub></i>] end [<i>f<sub>e</sub></i>]
step [<i>increment</i>]</b> - playback/recording setup:
<i>f<sub>s</sub></i> (default <b>0.0</b>) is the smallest fraction
to be visited during playback or the movie,
<i>f<sub>e</sub></i> (default <b>1.0</b>) is the largest, and 
<i>increment</i> (default <b>0.1</b>) is the change in fraction per frame
<li><b>Undisplay original maps</b>
- undisplay the endpoint maps whenever the fraction is changed
<li><b>Multiplier for second map [<i>factor</i>]</b>
- scale the values in the second map by <i>factor</i> before
calculating intermediate values
<li><b>Adjust threshold for constant volume</b>
- automatically adjust the
<a href="../../ContributedSoftware/volumeviewer/volumeviewer.html#threshcolor">threshold</a> 
(contour level) to keep the enclosed volume constant
<li><b>Add to first map instead of interpolating</b>
- instead of linearly interpolating between data values D1 
(from the first map) and D2 (from the second):
<pre>
<b>D1(1&ndash;fraction) + D2(fraction)</b>
</pre>
calculate intermediate values with:
<pre>
<b>D1 + D2(fraction)</b>
</pre>
This treats the second map as a delta to be applied to the first map. 
For example, the second map could represent normal mode fluctuations
of the first map.
<li><a name="roundtrip"><b>Round trip when recording movie</b></a>
- include the reverse interpolation after the forward interpolation
when recording a movie
</ul>
<b>Play</b> oscillates playback continuously until <b>Stop</b> is clicked.
</p><p>
<b>Record</b> progresses through a single cycle (start to
end and <a href="#roundtrip">optionally</a> back to start),
saving an image at each step, and then raises a dialog for specifying: 
<ul>
<li>movie <b>File name</b> and location
<li><b>File type</b> (MPEG-1, MPEG-2, MPEG-4, AVI MSMPEG-4v2, <b>Quicktime</b>)
<li><b>Bit rate</b> (default <b>6000 Kb/sec</b>, typical of DVD movies)
- higher rates increase quality but also file size
</ul>
<b>Close</b> closes the <b>Morph Map</b> interface. 
<b>Help</b> opens this manual page in a browser window.
</p>
<hr>
<address>UCSF Computer Graphics Laboratory / October 2009</address>
</body>
</html>
