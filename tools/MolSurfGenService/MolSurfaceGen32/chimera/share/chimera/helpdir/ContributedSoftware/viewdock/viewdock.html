<!--
--- UCSF Chimera Copyright ---
Copyright (c) 2000-2008 Regents of the University of California.
All rights reserved.  This software provided pursuant to a
license agreement containing restrictions on its disclosure,
duplication and use.  This notice must be embedded in or
attached to all copies, including partial copies, of the
software or any revisions or derivations thereof.
--- UCSF Chimera Copyright ---
-->

<html>
<head>
<TITLE>ViewDock</TITLE>
</head>
<body>
<h3>ViewDock <img src="viewdock.png" alt="ViewDock icon"></h3>

<h4>BACKGROUND</h4>
<p>
<a href="http://dock.compbio.ucsf.edu/index.html" target="_blank">DOCK</a>
calculates possible binding modes, given the structures of
ligand and receptor molecules.
In a DOCK search, each compound (typically from a database of many thousands) 
is treated as a possible ligand, and the structure 
of a target macromolecule is treated as the receptor.
Various scoring methods are used to identify the most favorable binding modes 
of a given molecule and then to rank the molecules.
The output consists of many candidate ligands in their best-scoring poses.
It is then up to human users to look through the results
and decide which compounds should be tested in the real world.   
For further details, please consult the
<a href="http://dock.compbio.ucsf.edu/index.html" target="_blank">DOCK
web site</a>.
</p><p>
<b>ViewDock</b> facilitates the interactive selection of compounds
from the output of DOCK.
With a single mouseclick, a user can view an individual docked molecule
and simultaneously display its name, scores, and other information.
The list of molecules can be sorted in various ways, edited
to remove compounds deemed uninteresting, and saved for future reference.
For a step-by-step example, see the
<a href="../../UsersGuide/tutorials/vdtut.html">ViewDock tutorial</a>.
</p><p>
The state of <b>ViewDock</b> is included in saved
<a href="../../UsersGuide/sessions.html#sesdef">sessions</a>.
DOCK (versions 4, 5, 6) scoring grids can be visualized with
<a href="../volumeviewer/framevolumeviewer.html" target="_top"><b>Volume 
Viewer</b></a>.
</p>

<a name="startup">
<h4>STARTUP AND INPUT</h4>
</a>
<p>
There are <a href="../../UsersGuide/extension.html">several ways to start</a>
<b>ViewDock</b>, a tool in the 
<b>Surface/Binding Analysis</b> category.
Starting the tool brings up a 
<a href="../../UsersGuide/opensave.html">dialog</a> for 
opening the file of docked molecules.
Format options include:
<ul>
<li><b>Dock 4, 5 or 6 [.pdb, .mol2]</b> (default)
- from recent versions of
<a href="http://dock.compbio.ucsf.edu/index.html" target="_blank">DOCK</a>
<li><b>Dock 3.5.x search [.pdb]</b>
- search mode results from the variant developed in the
 <a href="http://shoichetlab.compbio.ucsf.edu/index.php" 
target="_blank">Shoichet laboratory</a>
<li><b>Dock 3.5.x single [.pdb]</b>
- single mode results from the variant developed in the
 <a href="http://shoichetlab.compbio.ucsf.edu/index.php" 
target="_blank">Shoichet laboratory</a>
<li><b>Dock 3 or 3.5 [.pdb]</b>
- from older versions of
<a href="http://dock.compbio.ucsf.edu/index.html" target="_blank">DOCK</a>
<li><b>Mordor [.ind]</b> 
- from
<a href="http://mondale.ucsf.edu/index_mordor.html" target="_blank">MORDOR</a>,
MOlecular Recognition with a Driven dynamics OptimizeR</a>
<li><b>all (ask type)</b>
<li><b>all (guess type)</b>
</ul>
</p><p>
Another way to start <b>ViewDock</b> is with the
<a href="../../UsersGuide/midas/viewdock.html"><b>viewdock</b></a> command,
which loads a specified file of docking results.
</p>

<a name="listbox">
<h4>THE LISTBOX</h4>
</a>
<p>
When the file of docked molecules has been read, 
the <b>ViewDock ListBox</b> will appear
and the first molecule will be displayed in the main Chimera window.  
In most cases, a user will also display the receptor structure,
which can be opened either before or after the file of docked molecules.
<b>ViewDock</b> is controlled via the 
<b>ListBox</b> and its <a href="#menu">menu</a>.
</p>
<table border="1" style="margin:8px 8px 8px 8px" align="right">
<tr><th>ViewDock ListBox</th></tr>
<tr><td><img src="listbox.png"></td></tr>
</table>
<p>
<a  name="upper">
The <b>upper panel</b></a> lists the compounds along with their
<a href="#status">status</a> settings (<b>S</b>) and the values of
various <b><i>descriptors</i></b>.  Available descriptors 
can be shown or hidden using the <a href="#colmenu"><b>Column</b> menu</a>.
<a name="descriptors">
Most descriptors are simply read from the file of docked ligands; 
what descriptors are present and available depends on the 
DOCK version and options used.
</a>
In addition: 
<ul>
<li>the <a href="#hbmenu"><b>HBonds... Add Count...</b></a> options
can be used to identify <a href="#hbonds">hydrogen bonds</a> 
and add their counts as new descriptors
<li><a href="#diagram"><b>Column... Diagram...</b></a> can be used to
generate a column of 2D chemical diagrams
with the <b>GIF Creator for Chemical Structures</b> web service 
(courtesy of
<a href="http://www2.ccc.uni-erlangen.de/people/Wolf_Ihlenfeldt/"
target="_blank">Dr. W. D. Ihlenfeldt</a> and hosted by the 
<a href="http://www.cgl.ucsf.edu/Overview/index.html" target="_blank">Resource 
for Biocomputing, Visualization, and Informatics</a> at UCSF;
see <a href="../diagram/diagram.html#conditions">usage conditions</a>)
</ul>
The listing can be sorted by the values in any column (except diagrams) by
clicking the column header.  Clicking the header once sorts the entries
in order of increasing value and places an up arrow in the header.  
Clicking again sorts the entries in decreasing
order and places a down arrow in the header.
</p><p>
<a name="chosen">
A compound can be <b><i>chosen</i></b> by clicking on its line in the 
upper panel.
</a>
Multiple compounds may be chosen at once.
Chosen lines are highlighted and only the chosen compounds are displayed.  
<b>Ctrl</b>-click adds to an existing choice rather than replacing it.
To highlight a block of compounds without having to hold down
the mouse button, click on the first (or last) and then <b>Shift</b>-click
on the last (or first) in the desired block.
For results from DOCK versions 4 and later,
the <b>lower panel</b> shows detailed information 
when a single compound is chosen.
</p><p>
Any numerical <a href="#descriptors">descriptors</a>
<i>from the input file</i> are assigned as 
<a href="../defineattrib/defineattrib.html#attribdef">attributes</a>
of <b>models</b> (each docked molecule is treated as a separate model),
with the attribute name derived from the descriptor name by substituting
underscores for spaces, changing any capital letters to lowercase,
and appending <b>dock_</b> at the beginning.  For example,
the descriptor <b>Energy score</b> is assigned as an attribute of models
named <b>dock_energy_score</b>.  Such assignments allow docked compounds
to be <a href="../render/render.html">rendered</b></a> (with colors or radii)
or <A href="../render/render.html#select">selected</a>
by their descriptor values.
</p><p>
<b>Hide</b> dismisses the <b>ListBox</b> without exiting from <b>ViewDock</b>.
<b>Quit</b> exits from <b>ViewDock</b> and closes the docked molecules (like
<a href="#filemenu"><b>File... Close</b></a> in the <b>ListBox</b> menu).
<b>Help</b> brings up this manual page in a browser window.
When the <b>ListBox</b> is hidden or obscured by other windows, 
it can be resurrected using the <b>Raise</b> option for the <b>ViewDock</b>
<a href="../../UsersGuide/instances.html">instance in the
<b>Tools</b> menu</a>.  The instance's <b>Hide</b> and <b>Quit</b> options
have the same effect as the corresponding <b>ListBox</b> buttons.
</p>

<a name="status">
<h4>COMPOUND STATUS</h4>
</a>
<p>
Three mutually exclusive states are possible for each compound:
<b>Viable</b>, <b>Deleted</b>, or <b>Purged</b>.
The initial state is viable,
but if a molecule is deemed uninteresting, it can be changed to
deleted or purged by clicking on the checkboxes
near the bottom of the <b>ListBox</b>.
Clicking a status checkbox changes the status of all <a href="#chosen">
chosen</a> compounds.
</p><p>
In general, <b>Viable</b>
compounds are interesting (or have not been looked at yet),
<b>Deleted</b> compounds are less interesting but may deserve another look,
and <b>Purged</b> compounds are meant to be discarded.
The <a href="#lbmenu"><b>Compounds</b> menu</a> controls
(based on status) which compounds are listed in the upper panel.
</p><p>
When structures are written out using
<a href="#filemenu"><b>File... Rewrite</b></a>, viable and deleted
but not purged structures are included in the output file.
In contrast, structures in all three states are included in a file
written out using <a href="#filemenu"><b>File... Save</b></a> or 
<a href="#filemenu"><b>File... Save As</b></a>.
The states of the molecules are also recorded in these output files,
which can be input to later sessions of <b>ViewDock</b>.
No matter how the molecules are sorted in the <b>ListBox</b>,
they remain in their original order in a saved PDB file.
</p><p>
There are other ways to change status besides clicking a status checkbox:
<ul>
<li> if <a href="#selmenu"><b>Selection... Prune</b></a> 
is activated and part of a compound is
<a href="../../UsersGuide/selection.html#pickselect">picked</a>
in the graphics window, the compound is undisplayed and marked as deleted
<li> <a href="#hbfilt"><b>HBonds... Change Compound State</b></a>
allows compound status to be changed based on ligand-receptor
<a href="#hbonds">hydrogen bonds</a>
</ul>
</p>

<a name="hbonds">
<h4>HYDROGEN BONDS</h4></a>
<p>
The <a href="#hbmenu"><b>HBonds</b> menu</a> allows 
incorporation of hydrogen bonding information calculated with 
<a href="../findhbond/findhbond.html"><b>FindHBond</b></a>.
If <b>FindHBond</b> has not already been run, its interface will appear.
If <b>FindHBond</b> has been run, but one wishes to run it again with 
different parameters, it can be started from the main Chimera
<b>Tools</b> menu or by using another of the 
<a href="../../UsersGuide/extension.html">standard ways to start tools</a>.
When <b>FindHBond</b> is used to help screen compounds in <b>ViewDock</b>, 
the <b>inter-model</b> setting is most efficient.
</p><p>
The <a href="#hbmenu"><b>HBonds... Add Count...</b></a>
options add hydrogen-bonding statistics as 
<a href="#descriptors">descriptor</a> columns:
<ul>
<li>the number of hydrogen bonds between a compound
and either the entire receptor [<b>HBonds (all)</b>] or the currently
<a href="../../UsersGuide/selection.html">selected</a> 
atoms of the receptor [<b>HBonds (sel)</b>]
<li>the number of ligand atoms participating in these hydrogen bonds
<li>the number of receptor atoms participating in these hydrogen bonds
</ul>
The hydrogen bond descriptors can then be used to 
<a href="#byvalue">choose compounds by value</a>
or guide manual changes in <a href="#status">compound status</a>.
</p><p>
<a href="#hbfilt"><b>HBonds... Change Compound State</b></a>
allows changes in <a href="#status">compound status</a>
based on the number of hydrogen bonds to the 
receptor or to a <a href="../../UsersGuide/selection.html">selected</a> 
portion of the the receptor.
To use different hydrogen-bonding criteria, remember to
change the compounds back to their previous states before re-running
the hydrogen bond calculation.
(If many status changes have been performed manually,
it may be helpful to use <a href="#filemenu"><b>File... Save</b></a> or
<a href="#filemenu"><b>File... Save As</b></a>
<b><i>before</i></b> making further changes.)
</p>

<a name="byvalue">
<h4>CHOOSING BY VALUE</h4></a>
<p>
Compounds can be <a href="#chosen">chosen</a> based on the values 
of any (or all) of the available <a href="#descriptors">descriptors</a>,
including hydrogen-bond statistics calculated
with <a href="../findhbond/findhbond.html"><b>FindHBond</b></a>
(see the <a href="#hbmenu"><b>HBonds</b> menu</a>).
</p><p>
<a href="#lbmenu"><b>Compounds... Choose by 
Value</b></a> brings up a dialog for defining value ranges.
Whichever descriptors are shown in the <b>ListBox</b> are available
for choosing compounds.  To add a descriptor to the <b>Choose by Value</b>
dialog, simply show the descriptor in the <b>ListBox</b> using
the <a href="#colmenu"><b>Column</b> menu</a>.
Any descriptor shown in the <b>ListBox</b>
but not of interest for choosing compounds can be disregarded by 
unchecking the corresponding checkbox. 
</p><p>
<a name="designate">
Checkboxes under <b>Choose from</b> designate which compounds should
be considered</a>, on the basis of their <a href="#status">status</a>.
The values displayed in the histograms and/or lists only come from
this designated set of compounds.
</p><p>
Numerical descriptors are depicted in a histogram.
Within a histogram</a>,
two <b><i>markers</i></b> are shown as vertical bars.
Clicking on a marker shows its <b>Value</b> in black.
Clicking elsewhere within the histogram shows the <b>Value</b>
(X-coordinate) of the mouseclick in gray.
A marker can be moved by changing its <b>Value</b>
and then pressing Enter (return) or by dragging it horizontally
with the left mouse button.  Holding the Shift
key down reduces the speed (mouse sensitivity) of marker
dragging tenfold, allowing finer control.
Only compounds with values between the markers (inclusive) will
be <a href="#chosen">chosen</a>.
</p><p>
String-valued descriptors are displayed as a list.
Clicking a line highlights just that line;
<b>Ctrl</b>-click adds to an existing choice rather than replacing it.
To highlight a block of lines without having to hold down
the mouse button, click on the first (or last) and then <b>Shift</b>-click
on the last (or first) in the desired block.
Only compounds with highlighted values will be <a href="#chosen">chosen</a>.
</p><p>
A message of the form <b><i>N</i> of <i>M</i> compounds applicable</b>
reports how many of the compounds (N) of those <a href="#designate">
designated</a> to choose from (M) meet all current criteria.  
These compounds will be <a href="#chosen">chosen</a> 
when <b>Apply</b> or <b>OK</b>
(which also dismisses the dialog) is pressed.
</p>

<a name="display">
<h4>COMPOUND DISPLAY</h4>
</a>
<p>
Display can controlled in many ways.
Because of the potential for confusion, however, it is 
recommended that the <b>ViewDock ListBox</b>, not commands,
be used to control the display of the docked compounds.
</p><p>
The remainder of this section explains the interplay among
display controls, but can be skipped if only the
<b>ViewDock ListBox</b> will be used to control compound display.
</p><p>
Individual compounds are submodels of a single model (model 0,
for example) and are specified #0.1, #0.2, <i>etc.</i> (see
<a href="../../UsersGuide/midas/atom_spec.html#subcats">
atom specification syntax</a>).  Even though they are termed submodels,
the display of each compound can be independently
disabled or enabled at the model level
(see <a href="../../UsersGuide/hierarchy.html#display">
display hierarchy</a>).
Within <b>ViewDock</b>, there are two ways to control model-level display:
<ul>
<li><a href="#chosen">choosing</a> 
one or more compounds within the <b>ListBox</b> upper panel
enables their display and disables the display of any compounds previously
<a href="#chosen">chosen</a> in the <b>ListBox</b>
<li>the <b>Hide</b> and <b>Show</b> options in the <a href="#chimenu">
<b>Chimera</b> menu</a>
disable and enable the display as indicated, regardless of what is 
<a href="#chosen">chosen</a> in the <b>ListBox</b>
</ul>
Compounds whose display has been disabled at the model level are unresponsive
to the command <a href="../../UsersGuide/midas/display.html"><b>display</b></a>.
Ways of enabling display at the model level
(and restoring responsiveness to the command
<a href="../../UsersGuide/midas/display.html"><b>display</b></a>)
include choosing the compound in the <b>ListBox</b> upper panel,
using one of the <a href="#chimenu"><b>Chimera... Show</b></a>
options, and using the command
<a href="../../UsersGuide/midas/modeldisplay.html"><b>modeldisplay</b></a>.
</p><p>
For example, if only the first five compounds are display-enabled,
<blockquote><tt>
<i>Command</i>: <b>~disp #0.2</b>
<br></tt>and<tt>
<br><i>Command</i>: <b>disp #0.2</b>
<br></tt>but not<tt>
<br><i>Command</i>: <b>disp #0.8</b>
</tt></blockquote>
will work.   In contrast, other commands like
<blockquote><tt>
<i>Command</i>: <b>label #0.7</b>
<br></tt>and<tt>
<br><i>Command</i>: <b>color pink #0.6</b>
</tt></blockquote>
are executed, although their effects may not be visible until the
corresponding molecules are displayed.  The command
<blockquote><tt>
<i>Command</i>: <b>disp #0</b>
</tt></blockquote>
will display only the compounds whose display is enabled at the model level.
</p>
<hr>
<a name="menu"><h4>LISTBOX MENU</h4></a>

<a name="filemenu"><h4>File</h4></a>
<ul>
<li><b>Save</b> - write all compounds and their states to a file with
the same name as the input file (overwrites the input file)
<li><b>Save As...</b> write all compounds and their states to a user-named file
<li><b>Rewrite...</b> write all viable and deleted (but not purged) compounds
and their states to a user-named file
<li><b>Close</b> - close the <b>ListBox</b> and remove the docked molecules
</ul>
<a name="lbmenu"><h4>Compounds</h4></a>
The <b>Compounds</b> menu controls which compounds are listed in
the top panel of the <b>ListBox</b>.  
<a name="indicate">
Any combination of the first three entries may be checked to indicate</a> 
which <a href="#status">status</a> types should be listed.
<ul>
<li><b>List Viable</b>
<li><b>List Deleted</b>
<li><b>List Purged</b>
<li><b>List Chosen Only</b> - 
show only the <a href="#chosen">chosen</a> compounds
of the <a href="#indicate">indicated</a> status types
<li><b>List All</b> - show all compounds
of the <a href="#indicate">indicated</a> status types
(regardless of whether they are <a href="#chosen">chosen</a>)
<li><b>Invert Choices</b> - <a href="#chosen">choose</a> the current
unchosen compounds and <i>vice versa</i>
<li><b>Choose by Value...</b> open a dialog for
<a href="#byvalue">choosing compounds by descriptor value</a>
</ul>
<a name="colmenu"><h4>Column</h4></a>
<ul>
<li><b>Show</b> - add a <a href="#descriptors">descriptor</a>
(many possibilities) to the listing in the top panel of the <b>ListBox</b>
<li><b>Hide</b> - remove a <a href="#descriptors">descriptor</a>
from the listing in the top panel of the <b>ListBox</b>
<li><b>Read...</b> read a text file specifying which 
<a href="#descriptors">descriptor</a>
columns should be shown after the <b>S</b> (status) column.  
The format is one descriptor name per line, entered exactly
as shown in the <b>Show</b>/<b>Hide</b> menus, in the desired order.
The file should not contain any blank lines.  Any existing columns 
of descriptors will be replaced by the those specified in the file.
<a name="diagram">
<li><b>Diagram...</b> generate 2D chemical diagrams of the structures
</a>
with the <b>GIF Creator for Chemical Structures</b> web service 
(courtesy of
<a href="http://www2.ccc.uni-erlangen.de/people/Wolf_Ihlenfeldt/"
target="_blank">Dr. W. D. Ihlenfeldt</a> and hosted by the 
<a href="http://www.cgl.ucsf.edu/Overview/index.html" target="_blank">Resource 
for Biocomputing, Visualization, and Informatics</a> at UCSF), or
hide/show previously generated diagrams.  Options:
  <ul>
  <li><b>Diagram width</b> (default <b>96</b>) 
  - pixel width of generated PNG image
  <li><b>Diagram height</b> (default <b>96</b>)
  - pixel height of generated PNG image
  </ul>
A compound's diagram will be blank until results are returned,
and image generation may not work for all compounds.
See <a href="../diagram/diagram.html#conditions">usage conditions</a>.
</ul>
<a name="selmenu"><h4>Selection</h4></a>
The following checkboxes are mutually exclusive and control how
<a href="../../UsersGuide/selection.html#pickselect">picking</a>
from the graphics window is handled by <b>ViewDock</b>.
<ul>
<li><b>Ignore</b> - ignore
<a href="../../UsersGuide/selection.html#pickselect">picking</a>
in the graphics window
<li><b>Identify</b> - use the molecule containing the
<a href="../../UsersGuide/selection.html#pickselect">picked</a>
atom or bond as the current choice in the <b>ListBox</b>
<li><b>Prune</b> - undisplay the molecule containing the
<a href="../../UsersGuide/selection.html#pickselect">picked</a>
atom or bond and change its status to deleted
</ul>
<a name="chimenu"><h4>Chimera</h4></a>
The <b>Hide</b> and <b>Show</b> options toggle the display status of
compounds in the main Chimera window.
<ul>
<li><b>Hide All</b> [<b>Viable</b>, <b>Deleted</b>, <b>Purged</b>]
<li><b>Show All</b> [<b>Viable</b>, <b>Deleted</b>, <b>Purged</b>]
</ul>
<a name="hbmenu"><h4>HBonds</h4></a>
The <b>HBonds</b> menu allows incorporation of H-bond information 
calculated with <a href="../findhbond/findhbond.html"><b>FindHBond</b></a>.
<ul>
<li><b>Add Count to Entire Receptor</b> - add 
<a href="#descriptors">descriptor</a> columns
listing the number of ligand-receptor H-bonds and
the numbers of ligand atoms and receptor atoms,
respectively, involved in these H-bonds 
(a given atom may participate in more than one H-bond)
<li><b>Add Count to Selected Atoms</b> - add
<a href="#descriptors">descriptor</a> columns
listing the number of H-bonds between a ligand and the currently
<a href="../../UsersGuide/selection.html">selected</a> atoms of the
receptor and the numbers of ligand atoms and receptor atoms, 
respectively, involved in these H-bonds 
(a given atom may participate in more than one H-bond).
If the <a href="../../UsersGuide/selection.html">selection</a>
is later changed, this menu item must be chosen again to refresh
the numbers. 
<li><b><a name="hbfilt">Change Compound State...</a></b>
mark as [viable/<b>deleted</b>/purged] compounds without:
  <ul>
  <li>hydrogen bonds to [<b>all</b>/any]
  <a href="../../UsersGuide/selection.html">selected</a> receptor heteroatoms
  <li>[<i>n</i>] or more hydrogen bonds to receptor -
  (<i>n</i>=<b>2</b> by default)
  </ul>
</ul>
<a name="movmenu"><h4>Movie</h4></a>
<ul>
<li><b>Play</b> - automatically go through the list of compounds, displaying
one at a time; all compounds currently listed in the top panel of the
<b>ListBox</b> will be shown, regardless of status, in the order in which
they are listed
<li><b>Stop</b> - stop the automatic sequential display of compounds (only
available after <b>Play</b> has been chosen)
<li><b>Options...</b> Play or Stop the movie, control the length of time
each compound is shown
</ul>
<hr>

<a name="examples">
<h4>EXAMPLE FILES</h4></a>
<p>
Note that DOCK 4 interprets information about each molecule as <b>Name</b>
or <b>Description</b> based on where this information occurs in the input
database file.  Here are examples of a single molecule from
<a href="example.mol2in">(A)</a> a Mol2 database file input to DOCK 4,
<a href="example.mol2out">(B)</a> a Mol2 output file from DOCK 4, and
<a href="example.pdbout">(C)</a> a PDB output file from DOCK 4.
Multiple-molecule files are simply concatenations of the data for
single molecules.  <b>Number</b> is sequential number in order of occurrence
in the file from DOCK, and <b>Source num</b> is the sequential number
in order of occurrence in the database file input to DOCK.
</p>
<hr>
<address>UCSF Computer Graphics Laboratory / December 2008</address>
</body>
</html>
